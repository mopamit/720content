<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>מצפן אינטראקטיבי - זוויות</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            touch-action: none;
        }
        
        .app-container {
            width: 100%;
            max-width: 600px;
            background: white;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            overflow: hidden;
            display: flex;
            flex-col;
            align-items: center;
            padding: 1.5rem;
        }

        .compass-container {
            position: relative;
            width: 100%;
            aspect-ratio: 4 / 3; /* יחס ממדים התואם לתמונה שהעלית */
            background-color: #e5e7eb;
            border-radius: 1rem;
            overflow: hidden;
        }

        svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        .grabber {
            cursor: pointer;
            fill: transparent;
        }

        /* אנימציית סיבוב חלקה למחוגים */
        #needlesGroup {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* אפקטים במעבר עכבר כדי להראות שאפשר ללחוץ */
        .grabber:hover + .needle-visual polygon,
        .grabber:hover + .needle-visual line {
            filter: drop-shadow(0px 0px 4px rgba(255, 255, 255, 0.8));
            stroke-width: 5px;
        }

        .grabber:active + .needle-visual polygon,
        .grabber:active + .needle-visual line {
            filter: drop-shadow(0px 4px 6px rgba(0,0,0,0.5));
        }
    </style>
</head>
<body class="m-0 p-0 w-full h-screen overflow-hidden bg-transparent flex justify-center items-center">

    <!-- שינוי גודל החלון לקטן יותר (רוחב 350px) ושמירה על יחס הממדים -->
    <div class="relative w-[350px] aspect-[4/3] flex justify-center items-center rounded-2xl overflow-hidden shadow-xl border border-gray-300 bg-white">
        
        <!-- אזור ה-SVG שמכיל את התמונה והמחוגים -->
        <svg viewBox="0 0 600 450" id="compassSvg" class="w-full h-full object-contain">
            
            <image 
                href="https://lomdot.education.gov.il/metodica/720active/math/methodica-math-angles-ls01-00065/assets/questions/singlechoicespin4waysarrow/question-image.png" 
                x="0" y="0" width="600" height="450" 
                preserveAspectRatio="xMidYMid slice" 
                id="bgImage"
            />

            <!-- קבוצת המרכז - הותאמה במדויק למרכז המצפן בתמונה (הוזזה ימינה ולמטה) -->
            <g id="centerGroup" transform="translate(338, 251)">
                
                <!-- הצללה קלה למחוגים להפרדה מהרקע -->
                <circle cx="0" cy="0" r="18" fill="rgba(255,255,255,0.4)" filter="blur(2px)"/>

                <!-- קבוצת המחוגים המאוחדת (מסתובבים יחד) -->
                <g id="needlesGroup" transform="rotate(90)">
                    <!-- אזור אחיזה ולחיצה משותף לשני המחוגים -->
                    <path class="grabber" d="M -20,-70 L 20,-70 L 20,70 L -20,70 Z" />
                    
                    <g class="needle-visual pointer-events-none">
                        <!-- מחוג שחור (צפון) - מצביע למעלה -->
                        <line x1="0" y1="0" x2="0" y2="-45" stroke="#1f2937" stroke-width="4" stroke-linecap="round" />
                        <polygon points="-6,-40 6,-40 0,-55" fill="#1f2937" />
                        
                        <!-- מחוג אדום (דרום) - מצביע למטה -->
                        <line x1="0" y1="0" x2="0" y2="45" stroke="#ef4444" stroke-width="4" stroke-linecap="round" />
                        <polygon points="-6,40 6,40 0,55" fill="#ef4444" />
                    </g>
                </g>
                
                <!-- סיכה מרכזית -->
                <circle cx="0" cy="0" r="4" fill="#facc15" stroke="#a16207" stroke-width="1.5" class="pointer-events-none" />
                <circle cx="0" cy="0" r="1.5" fill="#fff" class="pointer-events-none" />
            </g>
        </svg>
        
    </div>

    <script>
        // --- הגדרות מיקום מרכז המצפן בתוך ה-SVG ---
        // הותאם במיוחד לתמונה הספציפית (הוזז טיפה ימינה ולמטה לדיוק מקסימלי)
        const CENTER_X = 338;
        const CENTER_Y = 251;

        // --- State ---
        let currentAngle = 90; // מתחיל מ-90 מעלות (מזרח)

        // --- DOM Elements ---
        const centerGroup = document.getElementById('centerGroup');
        const needlesGroup = document.getElementById('needlesGroup');

        // מקם את המרכז על פי ההגדרות
        centerGroup.setAttribute('transform', `translate(${CENTER_X}, ${CENTER_Y})`);

        // --- Interaction Handling ---
        function rotateNeedles() {
            // לחיצה מסובבת את שני המחוגים ב-90 מעלות ימינה (עם כיוון השעון)
            currentAngle += 90;
            needlesGroup.setAttribute('transform', `rotate(${currentAngle})`);
        }

        // --- Event Listeners ---
        
        // בחירת אזור האחיזה (הנתיב הבלתי נראה שמעל המחוגים)
        const grabber = needlesGroup.querySelector('.grabber');

        // אירוע לחיצה (קליק) על המחוגים - עובד גם בניידים וגם במחשב
        grabber.addEventListener('click', rotateNeedles);

    </script>
</body>
</html>
